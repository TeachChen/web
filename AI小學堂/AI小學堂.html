<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ‹å° AI å°å­¸å ‚</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- è¼‰å…¥ Google Font "Inter" -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* æ‡‰ç”¨å­—å‹ */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        /* æŒ‰éˆ•é»æ“Šæ™‚çš„æ¨£å¼ */
        .option-btn:active, .btn:active {
            transform: scale(0.95);
        }
        /* æ­£ç¢ºç­”æ¡ˆçš„æ¨£å¼ */
        .correct {
            background-color: #22c55e !important; /* Tailwind green-500 */
            color: white !important;
            border-color: #16a34a !important; /* Tailwind green-600 */
        }
        /* éŒ¯èª¤ç­”æ¡ˆçš„æ¨£å¼ */
        .incorrect {
            background-color: #ef4444 !important; /* Tailwind red-500 */
            color: white !important;
            border-color: #dc2626 !important; /* Tailwind red-600 */
        }
        /* éš±è—å…ƒç´  */
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-blue-50 min-h-screen flex items-center justify-center p-4">

    <!-- æ¸¬é©—å®¹å™¨ -->
    <div id="quiz-container" class="bg-white w-full max-w-xl p-6 md:p-8 rounded-2xl shadow-xl transition-all duration-300">
        
        <!-- æ¸¬é©—æ¨™é¡Œ -->
        <h1 class="text-3xl font-bold text-center text-blue-800 mb-6">
            åœ‹å° AI å°å­¸å ‚
        </h1>

        <!-- å­¸ç”Ÿè³‡æ–™è¼¸å…¥ç•«é¢ -->
        <div id="user-info-screen">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">é–‹å§‹æ¸¬é©—å‰ï¼Œè«‹è¼¸å…¥ï¼š</h2>
            <div class="space-y-4">
                <div>
                    <label for="class-input" class="block text-sm font-medium text-gray-600 mb-1">ç­ç´š (ä¾‹å¦‚: ä¸‰å¹´äºŒç­)</label>
                    <input type="text" id="class-input" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="è«‹è¼¸å…¥ç­ç´š">
                </div>
                <div>
                    <label for="name-input" class="block text-sm font-medium text-gray-600 mb-1">å§“å</label>
                    <input type="text" id="name-input" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="è«‹è¼¸å…¥å§“å">
                </div>
            </div>
            <div id="user-info-error" class="mt-4 text-center font-medium text-red-600"></div>
            <button id="start-quiz-btn" class="btn w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg mt-6 hover:bg-blue-700 transition-all duration-200">
                é–‹å§‹æ¸¬é©—
            </button>
        </div>

        <!-- æ¸¬é©—å…§å®¹ (å•é¡Œèˆ‡åˆ†æ•¸) (é è¨­éš±è—) -->
        <div id="quiz-content" class="hidden">
            <!-- å•é¡Œå€åŸŸ -->
            <div id="question-area">
                <div class="flex justify-between items-center mb-4">
                    <span id="question-count" class="text-sm font-medium text-blue-600 px-3 py-1 bg-blue-100 rounded-full"></span>
                    <span id="current-score" class="text-sm font-medium text-green-600">åˆ†æ•¸: 0</span>
                </div>
                <h2 id="question-text" class="text-xl md:text-2xl font-semibold text-gray-800 mb-6 min-h-[60px]">
                    <!-- å•é¡Œæ–‡å­—å°‡ç”± JavaScript è¼‰å…¥ -->
                </h2>
            </div>

            <!-- é¸é …æŒ‰éˆ• -->
            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- é¸é …å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
            </div>

            <!-- å›é¥‹è¨Šæ¯ -->
            <div id="feedback-message" class="mt-4 text-center font-medium"></div>

            <!-- ä¸‹ä¸€é¡ŒæŒ‰éˆ• (é è¨­éš±è—) -->
            <button id="next-btn" class="btn w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg mt-6 hover:bg-blue-700 transition-all duration-200 hidden">
                ä¸‹ä¸€é¡Œ
            </button>
        </div>

        <!-- æœ€çµ‚åˆ†æ•¸ç•«é¢ (é è¨­éš±è—) -->
        <div id="score-screen" class="hidden text-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">æ¸¬é©—å®Œæˆï¼</h2>
            <p id="final-score" class="text-4xl font-bold text-blue-800 mb-6">
                <!-- æœ€çµ‚åˆ†æ•¸ -->
            </p>
            <p id="final-message" class="text-lg text-gray-600 mb-8"></p>
            
            <!-- æ­£åœ¨ç´€éŒ„åˆ†æ•¸... æç¤º -->
            <div id="loading-message" class="text-gray-500 mb-4 hidden">æ­£åœ¨ç´€éŒ„åˆ†æ•¸...</div>

            <button id="restart-btn" class="btn w-full bg-green-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-600 transition-all duration-200">
                é‡æ–°æ¸¬é©—
            </button>
        </div>
    </div>

    <script>
        // é¡Œç›®è³‡æ–™ (ä¾†è‡ª PDF å…§å®¹)
        const questions = [
            {
                question: "ã€ŒAIã€çš„ä¸­æ–‡æ˜¯ä»€éº¼æ„æ€ï¼Ÿ",
                options: [
                    { text: "äººå·¥æ™ºæ…§", isCorrect: true },
                    { text: "è¶…ç´šé›»è…¦", isCorrect: false },
                    { text: "ç¶²è·¯é€£ç·š", isCorrect: false },
                    { text: "é›»å‹•ç©å…·", isCorrect: false }
                ]
            },
            {
                question: "ä¸‹åˆ—å“ªä¸€å€‹ã€Œä¸æ˜¯ã€èª²æœ¬ä¸­æåˆ°ç”Ÿæ´»ä¸­çš„ AI æ‡‰ç”¨ï¼Ÿ",
                options: [
                    { text: "æ™ºæ…§å‹æ‰‹æ©Ÿ", isCorrect: false },
                    { text: "æƒåœ°æ©Ÿå™¨äºº", isCorrect: false },
                    { text: "è…³è¸è»Š", isCorrect: true },
                    { text: "äººè‡‰è¾¨è­˜", isCorrect: false }
                ]
            },
            {
                question: "æˆ‘å€‘å¯ä»¥ç”¨è²éŸ³å’Œæ‰‹æ©Ÿä¸Šçš„å“ªä¸€å€‹ AI åŠ©ç†èªªè©±ï¼Ÿ",
                options: [
                    { text: "Siri æˆ– Google åŠ©ç†", isCorrect: true },
                    { text: "çˆ¸çˆ¸åª½åª½", isCorrect: false },
                    { text: "å­¸æ ¡è€å¸«", isCorrect: false },
                    { text: "é›»è¦–æ©Ÿ", isCorrect: false }
                ]
            },
            {
                question: "åœ¨ã€Œç„¡äººå•†åº—ã€è£¡ï¼ŒAI ç³»çµ±æ˜¯ä½¿ç”¨ä»€éº¼ä¾†åˆ¤æ–·ä½ æ‹¿èµ°äº†ä»€éº¼å•†å“ï¼Ÿ",
                options: [
                    { text: "é­”æ³•", isCorrect: false },
                    { text: "æ”å½±æ©Ÿå’Œæ„Ÿæ‡‰å™¨", isCorrect: true },
                    { text: "åº—å“¡å¿ƒç®—", isCorrect: false },
                    { text: "è²¼ç´™", isCorrect: false }
                ]
            },
            {
                question: "åœ¨ã€Œæ™ºæ…§ä½å®…ã€è£¡ï¼Œæˆ‘å€‘å¯ä»¥ç”¨ä»€éº¼æ–¹å¼æ§åˆ¶é›»ç‡ˆå’Œå†·æ°£ï¼Ÿ",
                options: [
                    { text: "å”±æ­Œ", isCorrect: false },
                    { text: "ç•«ç•«", isCorrect: false },
                    { text: "å¿µåŠ›", isCorrect: false },
                    { text: "è²éŸ³ (èªéŸ³è²æ§)", isCorrect: true }
                ]
            },
            {
                question: "ã€Œæ™ºæ…§ç´…ç¶ ç‡ˆã€çš„ä¸»è¦åŠŸèƒ½æ˜¯ä»€éº¼ï¼Ÿ",
                options: [
                    { text: "è®“ç´…ç‡ˆæ™‚é–“è®Šæ›´é•·", isCorrect: false },
                    { text: "æ ¹æ“šè»Šæµé‡èª¿æ•´è™ŸèªŒæ™‚é–“", isCorrect: true },
                    { text: "æ’­æ”¾å¥½è½çš„éŸ³æ¨‚", isCorrect: false },
                    { text: "è®“ç‡ˆå…‰æ›´æ¼‚äº®", isCorrect: false }
                ]
            },
            {
                question: "ä»€éº¼æ˜¯ã€Œè‡ªå‹•é§•é§›æ±½è»Šã€ï¼Ÿ",
                options: [
                    { text: "æœƒé£›çš„è»Š", isCorrect: false },
                    { text: "æœƒæ½›æ°´çš„è»Š", isCorrect: false },
                    { text: "éœ€è¦å¸æ©Ÿä¸€ç›´é–‹çš„è»Š", isCorrect: false },
                    { text: "å¯ä»¥è‡ªå·±å°èˆªå’Œé§•é§›çš„è»Š", isCorrect: true }
                ]
            },
            {
                question: "åœ¨æ•™è‚²æ–¹é¢ï¼ŒAI å¯ä»¥å¦‚ä½•å¹«åŠ©æˆ‘å€‘å­¸ç¿’ï¼Ÿ",
                options: [
                    { text: "å¹«æˆ‘å€‘å¯«ä½œæ¥­", isCorrect: false },
                    { text: "æä¾›å€‹äººåŒ–çš„å­¸ç¿’å»ºè­°", isCorrect: true },
                    { text: "å¹«æˆ‘å€‘è€ƒè©¦", isCorrect: false },
                    { text: "å¹«æˆ‘å€‘è¹ºèª²", isCorrect: false }
                ]
            },
            {
                question: "æ‰“æ•—ä¸–ç•Œåœæ£‹å† è»çš„çŸ¥å AI å«åšä»€éº¼åå­—ï¼Ÿ",
                options: [
                    { text: "AlphaGo", isCorrect: true },
                    { text: "Pepper", isCorrect: false },
                    { text: "Siri", isCorrect: false },
                    { text: "æƒåœ°æ©Ÿå™¨äºº", isCorrect: false }
                ]
            },
            {
                question: "åœ¨ç¶²è·¯ä¸Šè²·è¡£æœæ™‚ï¼ŒAI å¯ä»¥æä¾›ä»€éº¼æœ‰è¶£çš„åŠŸèƒ½ï¼Ÿ",
                options: [
                    { text: "å¹«ä½ ä»˜éŒ¢", isCorrect: false },
                    { text: "å¹«ä½ æ´—è¡£æœ", isCorrect: false },
                    { text: "è™›æ“¬è©¦ç©¿", isCorrect: true },
                    { text: "å¹«ä½ æŠ˜è¡£æœ", isCorrect: false }
                ]
            }
        ];

        // DOM å…ƒç´ 
        const quizContainer = document.getElementById('quiz-container');
        const userInfoScreen = document.getElementById('user-info-screen');
        const classInput = document.getElementById('class-input');
        const nameInput = document.getElementById('name-input');
        const userInfoError = document.getElementById('user-info-error');
        const startQuizBtn = document.getElementById('start-quiz-btn');

        const quizContent = document.getElementById('quiz-content');
        const questionArea = document.getElementById('question-area');
        const questionCount = document.getElementById('question-count');
        const currentScoreEl = document.getElementById('current-score');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackMessage = document.getElementById('feedback-message');
        const nextBtn = document.getElementById('next-btn');
        
        const scoreScreen = document.getElementById('score-screen');
        const finalScore = document.getElementById('final-score');
        const finalMessage = document.getElementById('final-message');
        const loadingMessage = document.getElementById('loading-message');
        const restartBtn = document.getElementById('restart-btn');

        // æ¸¬é©—ç‹€æ…‹
        let currentQuestionIndex = 0;
        let score = 0;
        let answerSelected = false;
        let userClass = '';
        let userName = '';

        // éš¨æ©Ÿæ‰“äº‚é¡Œç›®é †åº
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // è¼‰å…¥å•é¡Œ
        function loadQuestion() {
            answerSelected = false; // é‡ç½®ç­”æ¡ˆé¸æ“‡ç‹€æ…‹
            feedbackMessage.textContent = ''; // æ¸…é™¤å›é¥‹
            nextBtn.classList.add('hidden'); // éš±è—ä¸‹ä¸€é¡ŒæŒ‰éˆ•
            optionsContainer.innerHTML = ''; // æ¸…ç©ºèˆŠé¸é …

            if (currentQuestionIndex >= questions.length) {
                showScore();
                return;
            }

            const currentQuestion = questions[currentQuestionIndex];
            
            // æ›´æ–°å•é¡Œæ–‡å­—å’Œè¨ˆæ•¸
            questionText.textContent = currentQuestion.question;
            questionCount.textContent = `å•é¡Œ ${currentQuestionIndex + 1} / ${questions.length}`;
            currentScoreEl.textContent = `åˆ†æ•¸: ${score}`;

            // éš¨æ©Ÿæ‰“äº‚é¸é …
            shuffleArray(currentQuestion.options);

            // å»ºç«‹é¸é …æŒ‰éˆ•
            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.classList.add('option-btn', 'w-full', 'p-4', 'border-2', 'border-blue-300', 'rounded-lg', 'text-left', 'font-medium', 'text-gray-700', 'hover:bg-blue-100', 'hover:border-blue-500', 'transition-all', 'duration-200');
                
                button.addEventListener('click', () => selectAnswer(button, option));
                optionsContainer.appendChild(button);
            });
        }

        // é¸æ“‡ç­”æ¡ˆ
        function selectAnswer(button, selectedOption) {
            if (answerSelected) return; // å¦‚æœå·²ç¶“é¸æ“‡ç­”æ¡ˆï¼Œå‰‡ä¸åŸ·è¡Œ
            answerSelected = true;

            // ç¦ç”¨æ‰€æœ‰æŒ‰éˆ•
            Array.from(optionsContainer.children).forEach(btn => {
                btn.disabled = true;
                // ç§»é™¤ hover æ•ˆæœ
                btn.classList.remove('hover:bg-blue-100', 'hover:border-blue-500');
            });

            const currentQuestion = questions[currentQuestionIndex];
            
            if (selectedOption.isCorrect) {
                score++; // åŠ åˆ†
                currentScoreEl.textContent = `åˆ†æ•¸: ${score}`;
                button.classList.add('correct');
                feedbackMessage.textContent = 'ç­”å°äº†ï¼ä½ çœŸæ£’ï¼ğŸ‘';
                feedbackMessage.classList.add('text-green-600');
                feedbackMessage.classList.remove('text-red-600');
            } else {
                button.classList.add('incorrect');
                feedbackMessage.textContent = 'ç­”éŒ¯äº†ï¼Œå†æ¥å†å²ï¼ğŸ’ª';
                feedbackMessage.classList.add('text-red-600');
                feedbackMessage.classList.remove('text-green-600');
                
                // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
                Array.from(optionsContainer.children).forEach((btn, index) => {
                    if (currentQuestion.options[index].isCorrect) {
                        btn.classList.add('correct');
                    }
                });
            }

            // é¡¯ç¤ºä¸‹ä¸€é¡ŒæŒ‰éˆ•
            nextBtn.classList.remove('hidden');
        }

        // é¡¯ç¤ºæœ€çµ‚åˆ†æ•¸
        function showScore() {
            quizContent.classList.add('hidden'); // éš±è—å•é¡Œå€
            scoreScreen.classList.remove('hidden'); // é¡¯ç¤ºåˆ†æ•¸å€

            finalScore.textContent = `${score} / ${questions.length} åˆ†`;

            let message = '';
            const percentage = (score / questions.length) * 100;
            if (percentage === 100) {
                message = 'å¤ªå²å®³äº†ï¼å…¨éƒ¨ç­”å°ï¼ä½ å°±æ˜¯ AI å°åšå£«ï¼ ğŸ†';
            } else if (percentage >= 80) {
                message = 'éå¸¸æ£’ï¼ä½ å° AI æœ‰å¾ˆæ·±çš„äº†è§£å–”ï¼ ğŸŒŸ';
            } else if (percentage >= 50) {
                message = 'ä¸éŒ¯å–”ï¼ç¹¼çºŒåŠ æ²¹ï¼ ğŸ§ ';
            } else {
                message = 'åˆ¥ç°å¿ƒï¼Œå†è©¦ä¸€æ¬¡ï¼Œä½ æœƒæ›´é€²æ­¥ï¼ ğŸ’¡';
            }
            finalMessage.textContent = message;

            // å‘¼å«å‡½å¼ä¾†ç´€éŒ„åˆ†æ•¸
            logToGoogleSheet(userClass, userName, score, questions.length);
        }

        // ç´€éŒ„åˆ° Google Sheet
        async function logToGoogleSheet(userClass, userName, score, totalQuestions) {
            // ----- ï¼ï¼ï¼é‡è¦ï¼ï¼ï¼ -----
            // è«‹å°‡ 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE' æ›¿æ›æˆæ‚¨è‡ªå·±çš„ Google Apps Script ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ URL
            // è«‹åƒè€ƒ 'instructions_google_sheet.md' æª”æ¡ˆä¾†å»ºç«‹æ‚¨çš„ URL
            const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx22tXH6YCKXw7A5T2muvAq6sqB6XNFPYQTUj88Zgi8-jhVJSxjK9RjX1s1v6Hd6HI5Yw/exec';
            
            loadingMessage.classList.remove('hidden');
            loadingMessage.textContent = 'æ­£åœ¨ç´€éŒ„åˆ†æ•¸...';

            if (APPS_SCRIPT_URL === '') {
                console.warn("Google Apps Script URL is not set. Skipping log.");
                loadingMessage.textContent = 'ç´€éŒ„åŠŸèƒ½æœªè¨­å®šã€‚ (è«‹æ´½ç®¡ç†å“¡)';
                setTimeout(() => { loadingMessage.classList.add('hidden'); }, 3000);
                return;
            }

            const data = {
                class: userClass,
                name: userName,
                score: score,
                total: totalQuestions
            };

            try {
                const response = await fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'cors', // å…è¨±è·¨åŸŸè«‹æ±‚
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    redirect: 'follow',
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                
                if (result.result === "success") {
                    loadingMessage.textContent = 'åˆ†æ•¸å·²ç´€éŒ„ï¼';
                } else {
                    throw new Error(result.message || 'Unknown error from Apps Script');
                }
                
                setTimeout(() => { loadingMessage.classList.add('hidden'); }, 2000);

            } catch (error) {
                console.error('Error logging to Google Sheet:', error);
                loadingMessage.textContent = 'ç´€éŒ„å¤±æ•—ï¼Œè«‹æª¢æŸ¥è¨­å®šæˆ–ç¶²è·¯ã€‚';
                setTimeout(() => { loadingMessage.classList.add('hidden'); }, 3000);
            }
        }


        // é‡æ–°é–‹å§‹æ¸¬é©—
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userClass = '';
            userName = '';
            
            // æ¸…ç©ºè¼¸å…¥æ¬„ä½
            classInput.value = '';
            nameInput.value = '';
            userInfoError.textContent = '';

            // é‡ç½®ç•«é¢
            scoreScreen.classList.add('hidden');
            quizContent.classList.add('hidden');
            userInfoScreen.classList.remove('hidden');
        }

        // --- å•Ÿå‹• ---
        
        // "é–‹å§‹æ¸¬é©—" æŒ‰éˆ•ç›£è½
        startQuizBtn.addEventListener('click', () => {
            userClass = classInput.value.trim();
            userName = nameInput.value.trim();

            if (userClass === '' || userName === '') {
                userInfoError.textContent = 'è«‹å‹™å¿…å¡«å¯«ç­ç´šå’Œå§“åå–”ï¼';
                return;
            }

            // é©—è­‰é€šé
            userInfoError.textContent = '';
            userInfoScreen.classList.add('hidden');
            quizContent.classList.remove('hidden');
            
            // éš¨æ©Ÿæ‰“äº‚é¡Œç›®ä¸¦è¼‰å…¥
            shuffleArray(questions); 
            loadQuestion();
        });


        // "ä¸‹ä¸€é¡Œ" æŒ‰éˆ•ç›£è½
        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            loadQuestion();
        });

        // "é‡æ–°æ¸¬é©—" æŒ‰éˆ•ç›£è½
        restartBtn.addEventListener('click', restartQuiz);

        // åˆå§‹ç‹€æ…‹ï¼šä¸è‡ªå‹•è¼‰å…¥å•é¡Œï¼Œç­‰å¾…ä½¿ç”¨è€…è¼¸å…¥è³‡æ–™
        // (shuffleArray å’Œ loadQuestion ç§»åˆ° "start-quiz-btn" çš„ç›£è½äº‹ä»¶ä¸­)

    </script>

</body>
</html>



